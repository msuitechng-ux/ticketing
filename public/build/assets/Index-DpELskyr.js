import{d as h,r as k,c as R,b as y,e as a,f as e,u as s,h as S,w as d,l as N,y as v,t as o,o as g,i as V,g as u,a as T}from"./app-dkNPWVuj.js";import{s as x,a as f}from"./index-p3p8LMzb.js";import{s as D,a as m}from"./index-Dmq8Yyr6.js";import{s as $}from"./index-CqjVa_zo.js";import{s as A}from"./index-oHSxvI5f.js";import{s as B}from"./index-BjveomDO.js";import"./index-chFnNFZo.js";import"./index-DwuUCPtR.js";import"./index-C-x3wNAr.js";import"./index-BsCRQRu3.js";import"./index-CmvzEYPN.js";import"./index-DYg80Iji.js";const L={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},C={class:"bg-white shadow dark:bg-gray-800"},M={class:"mx-auto flex max-w-7xl items-center justify-between px-4 py-6 sm:px-6 lg:px-8"},U={class:"flex gap-3"},P={class:"mx-auto max-w-5xl px-4 py-8 sm:px-6 lg:px-8 space-y-6"},j={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},E={key:0,class:"text-gray-600 dark:text-gray-300"},G={class:"grid gap-4 sm:grid-cols-2"},I={class:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100"},W={class:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100"},Y={class:"grid gap-4 sm:grid-cols-2"},z={class:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100"},F={class:"flex flex-wrap items-center gap-3"},H={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},oe=h({__name:"Index",props:{ticketRequests:{},graduate:{},canRequestMore:{type:Boolean}},setup(i){const b=i,l=k({requested_quantity:1,reason:""}),c=k(null),q=()=>{T.post("/student/ticket-requests",l.value,{onSuccess:()=>{l.value={requested_quantity:1,reason:""}}})},_=async()=>{try{const n=`${window.location.origin}/student/ticket-requests`;if(navigator.share){await navigator.share({title:"Request Graduation Tickets",text:"Submit your extra ticket request.",url:n}),c.value="Share dialog opened.";return}await navigator.clipboard.writeText(n),c.value="Link copied to clipboard."}catch{c.value="Unable to share link."}},w=n=>({Pending:"warn",Approved:"success","Partially Approved":"info",Denied:"danger",Waitlisted:"secondary"})[n]??"info",p=R(()=>b.canRequestMore&&!!b.graduate);return(n,t)=>(g(),y("div",L,[a(s(S),{title:"Ticket Requests"}),e("div",C,[e("div",M,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Ticket Requests"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Request additional tickets and track their status ")],-1)),e("div",U,[a(s(x),{label:"Share Request Link",icon:"pi pi-share-alt",outlined:"",onClick:_}),a(s(N),{href:"/student/dashboard"},{default:d(()=>[a(s(x),{label:"Back to Dashboard",severity:"secondary",outlined:""})]),_:1})])])]),e("div",P,[c.value?(g(),y("p",j,o(c.value),1)):v("",!0),a(s(f),{class:"shadow-sm"},{title:d(()=>[...t[3]||(t[3]=[u("Submit a Request",-1)])]),content:d(()=>[i.graduate?(g(),y("form",{key:1,class:"space-y-4",onSubmit:V(q,["prevent"])},[e("div",G,[e("div",null,[t[4]||(t[4]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Ceremony ",-1)),e("div",I,o(i.graduate.ceremony?.name||"N/A"),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Request Deadline ",-1)),e("div",W,o(i.graduate.ceremony?.ticket_request_deadline?new Date(i.graduate.ceremony.ticket_request_deadline).toLocaleString():"No deadline set"),1)])]),e("div",Y,[e("div",null,[t[6]||(t[6]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Tickets Needed * ",-1)),a(s($),{modelValue:l.value.requested_quantity,"onUpdate:modelValue":t[0]||(t[0]=r=>l.value.requested_quantity=r),class:"w-full",min:1,max:10,disabled:!p.value},null,8,["modelValue","disabled"])]),e("div",null,[t[7]||(t[7]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Base Tickets Assigned ",-1)),e("div",z,o(i.graduate?.ceremony?.base_tickets_per_graduate||"-"),1)])]),e("div",null,[t[8]||(t[8]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Reason (optional) ",-1)),a(s(A),{modelValue:l.value.reason,"onUpdate:modelValue":t[1]||(t[1]=r=>l.value.reason=r),rows:"3",class:"w-full",placeholder:"Tell us why you need extra tickets",disabled:!p.value},null,8,["modelValue","disabled"])]),e("div",F,[a(s(x),{type:"submit",label:"Submit Request",icon:"pi pi-send",disabled:!p.value},null,8,["disabled"]),p.value?v("",!0):(g(),y("span",H," You cannot submit a request right now. "))])],32)):(g(),y("div",E," No graduate profile found. Please contact the administrator to be assigned to a ceremony. "))]),_:1}),a(s(f),{class:"shadow-sm"},{title:d(()=>[...t[9]||(t[9]=[u("My Requests",-1)])]),content:d(()=>[a(s(D),{value:i.ticketRequests,stripedRows:""},{empty:d(()=>[...t[10]||(t[10]=[e("div",{class:"py-8 text-center text-gray-500"},"No ticket requests yet",-1)])]),default:d(()=>[a(s(m),{field:"requested_quantity",header:"Requested"}),a(s(m),{field:"approved_quantity",header:"Approved"},{body:d(({data:r})=>[u(o(r.approved_quantity??"-"),1)]),_:1}),a(s(m),{field:"status",header:"Status"},{body:d(({data:r})=>[a(s(B),{value:r.status,severity:w(r.status)},null,8,["value","severity"])]),_:1}),a(s(m),{field:"created_at",header:"Submitted"},{body:d(({data:r})=>[u(o(new Date(r.created_at).toLocaleString()),1)]),_:1}),a(s(m),{field:"reviewed_at",header:"Reviewed"},{body:d(({data:r})=>[u(o(r.reviewed_at?new Date(r.reviewed_at).toLocaleString():"-"),1)]),_:1}),a(s(m),{field:"admin_notes",header:"Admin Notes"},{body:d(({data:r})=>[u(o(r.admin_notes||"-"),1)]),_:1})]),_:1},8,["value"])]),_:1})])]))}});export{oe as default};
